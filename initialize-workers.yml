---

- hosts:
  - helpers
  - workers
  connection: ssh
  become_method: sudo
  gather_facts: yes
  roles:

    # configuration.  
    # Note we assume there is a proper user on all the PiFarm cluster nodes.
    - update
    - pi_configs
    - common
    - worker_config
    - usb_hd_mount

    # Note: this configures both node_exporters and collectors
    - cluster_prometheus

    # Services
    - nfs_server
    - nfs4_mount

    # not sure what this one yet....investigate
    # - farm-tools/prometheus_server
    
